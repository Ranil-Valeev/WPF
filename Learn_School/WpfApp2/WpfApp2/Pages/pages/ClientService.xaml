<Page x:Class="WpfApp2.Pages.ClientService"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:WpfApp2.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="ClientService"
      xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase" >
    <Page.Resources >
        <CollectionViewSource x:Key="SortedServices" Source="{Binding Items}">
            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="Стоимость" Direction="Ascending"/>
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>
    </Page.Resources>
    <Grid Background="#FFE7">
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <!-- Добавим кнопки для сортировки -->
        <StackPanel Orientation="Horizontal" Background="White" Grid.Row="0">
            <Button Content="Сортировать по возрастанию цены" Background="Aqua" Click="Button_Click_1" Margin="5"/>
            <Button Content="Сортировать по убыванию цены" Click="Button_Click_2" Background="Aqua" Margin="5"/>
        </StackPanel>
        <ListBox x:Name="Listservice" Grid.Row="1" ItemsSource="{Binding Source={StaticResource SortedServices}}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <StackPanel>
                            <TextBlock Text="Услуга:" Margin="5"/>
                            <StackPanel Orientation="Horizontal">
                                <!--<Image Source="{Binding Path=Изображения.Изображение}"/>-->
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="{Binding Наименование_услуги}" Width="Auto" HorizontalAlignment="Left"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <Image Source="{Binding Path=Изображения.Изображение}" Width="200" Height="150"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="Продолжительность: " Width="Auto" HorizontalAlignment="Left"/>
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="{Binding Продолжительность}" Width="Auto" HorizontalAlignment="Left"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="Стоимость: " Width="Auto" HorizontalAlignment="Left"/>
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="{Binding Стоимость}" Width="Auto" HorizontalAlignment="Left"/>
                                <TextBlock Margin="500,0,0,0" FontWeight="Bold" FontSize="14" Text="Скидка: " Width="Auto" HorizontalAlignment="Right"/>
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="{Binding Path=Procent}" Width="Auto" HorizontalAlignment="Right"/>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock Margin="2" FontWeight="Bold" FontSize="14" Text="Итоговая цена: " Width="Auto" HorizontalAlignment="Left"/>
                                <TextBlock FontWeight="Bold" FontSize="14" Text="{Binding Path=FinalPrice}" Width="Auto" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Page>