<Page x:Class="Учебное_Заведение.Teacher_pages.lesson"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Учебное_Заведение.Teacher_pages"
      mc:Ignorable="d" 
      d:DesignHeight="540" d:DesignWidth="540"
      Title="lesson">
    <Grid Background="Aqua">
        <Border CornerRadius="20"
                Background="White"
                Padding="20"
                Width="600"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">

            <StackPanel>
                <TextBlock Text="Учёт посещаемости и оценок"
                           FontSize="26"
                           FontWeight="Bold"
                           Foreground="#0078D7"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                <TextBlock x:Name="CurrentLessonInfo"
                           FontSize="16"
                           Foreground="Gray"
                           TextAlignment="Center"
                           Margin="0,0,0,15"/>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="320">
                    <ItemsControl x:Name="StudentsPanel">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#D0E6FF"
                                        BorderThickness="1"
                                        CornerRadius="10"
                                        Padding="10"
                                        Margin="0,0,0,8"
                                        Background="#FAFCFF">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="80"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="{Binding ФИО}"
                                                   VerticalAlignment="Center"
                                                   FontSize="16"
                                                   FontWeight="SemiBold"/>

                                        <CheckBox Grid.Column="1"
                                                  Content="Присутствует"
                                                  IsChecked="{Binding Присутствует}"
                                                  VerticalAlignment="Center"
                                                  Margin="15,0"/>

                                        <TextBox Grid.Column="2"
                                                 Text="{Binding Оценка, UpdateSourceTrigger=PropertyChanged}"
                                                 HorizontalContentAlignment="Center"
                                                 VerticalContentAlignment="Center"
                                                 Margin="5,0"
                                                 FontSize="14"
                                                 Width="60"
                                                 Height="28"
                                                 BorderBrush="#0078D7"
                                                 BorderThickness="1"
                                                 ToolTip="Введите оценку (1-5)"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <Button Content="💾 Сохранить изменения"
                        Width="250"
                        Height="40"
                        Margin="0,20,0,0"
                        HorizontalAlignment="Center"
                        Background="#0078D7"
                        Foreground="White"
                        FontWeight="Bold"
                        Click="Save_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>
